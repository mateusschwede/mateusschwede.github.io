<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="../../anexos/icons/logoCircle64.png"/>
    <link rel="stylesheet" href="../estilo2.css">
    <title>Mateus Notes</title>
</head>
<body id="fundo">
<div class="container-fluid">


    <div class="row">
        <div class="col-sm-12" id="menu">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <a class="navbar-brand" href="../index2.html"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 172 172" style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M96.32,6.88c-7.58864,0 -13.76,6.17136 -13.76,13.76v27.52c0,1.89544 1.54112,3.44 3.44,3.44c1.89888,0 3.44,-1.54456 3.44,-3.44v-27.52c0,-3.79432 3.08568,-6.88 6.88,-6.88c3.79432,0 6.88,3.08568 6.88,6.88c0,1.89888 1.53768,3.44 3.44,3.44c1.90232,0 3.44,-1.54112 3.44,-3.44c0,-7.58864 -6.17136,-13.76 -13.76,-13.76zM44.72,44.72c-1.90232,0 -3.44,1.54112 -3.44,3.44c0,2.22224 0.45897,4.32811 1.22953,6.28203l-0.02688,0.01344l0.14781,0.37625c0.00344,0.01032 0.00328,0.02 0.00672,0.02688l39.92281,100.60656v6.21485c-0.01754,1.24059 0.63425,2.39452 1.7058,3.01993c1.07155,0.62541 2.39684,0.62541 3.46839,0c1.07155,-0.62541 1.72335,-1.77935 1.7058,-3.01993v-6.21485l39.6339,-99.96828l-0.04703,-0.02015c1.05264,-2.22912 1.69313,-4.692 1.69313,-7.31672c0,-1.89888 -1.53768,-3.44 -3.44,-3.44c-1.90232,0 -3.44,1.54112 -3.44,3.44c0,5.68976 -4.63024,10.32 -10.32,10.32c-5.68976,0 -10.32,-4.63024 -10.32,-10.32c0,-1.89888 -1.53768,-3.44 -3.44,-3.44c-1.90232,0 -3.44,1.54112 -3.44,3.44c0,5.68976 -4.63024,10.32 -10.32,10.32c-5.68976,0 -10.32,-4.63024 -10.32,-10.32c0,-1.89888 -1.53768,-3.44 -3.44,-3.44c-1.90232,0 -3.44,1.54112 -3.44,3.44c0,5.68976 -4.63024,10.32 -10.32,10.32c-4.25184,0 -7.90791,-2.58107 -9.48687,-6.26187l-0.04703,-0.12094c-0.50224,-1.21432 -0.7861,-2.54055 -0.7861,-3.93719c0,-1.89888 -1.53768,-3.44 -3.44,-3.44z"></path></g></g></svg> MateusNotes</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link" href="../index2.html">Voltar</a></li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-12" id="titulo1">
            <h1>Reconhecimento web e vulnerabilidades</h1>
            <h6><strong>Funcionamento HTTP, diretórios internos, HTTP Headers e vulnerabilidades</strong></h6>
        </div>

        <div class="col-sm-12">
            <h4>Rotinas</h4>
            <p id="textoPost">Fazer o reconhecimento das informações previstas no site. Pesquisar por robots.txt. Procurar mais páginas do site através de Google Hack. Verificar código fonte da página, para localizar pastas de mídias, links <small>(Ex: assets/img.png removemos o 'img.png' e encontramos a pasta com todas as imagens e arquivos internos nela, demais diretórios do sistema, assim como o servidor e SO em que está rodando o site)</small>. Para sites gigantes, utiliza-se ferramentas de <b>Web Crawler</b>, que analisam, automaticamente, todo o código fonte, em busca de links para acessos em diretórios e afins.</p>
            <br>
            <h4>Encontrar diretórios internos com Google Hack</h4>
            <p id="textoPost">Informe o código abaixo na barra de pesquisas do Google.</p>
<small><pre id="codigo"><code>
intitle:”Index of” site:bancocn.com
</code></pre></small>
            <img src="../anexos1/posta4/netdiretorios.png" class="img-fluid">
            <br><br>
            <h4>Erros padrões</h4>
            <ul>
                <li><b>404:</b> Página não encontrada;</li>
                <li><b>500:</b> Erro interno / Acesso barrado;</li>
                <li><b>200:</b> Não há erros (Permissão concedida);</li>
                <li><b>304:</b> Já há versão do arquivo salvo no cache do browser, que ainda não fora modificado.</li>
            </ul>
            <br>
            <h4>Protocolo HTTP</h4>
            <p id="textoPost">Com F12, conseguimos visualizar a Network, onde serão mostrados todos os passos de requisições realizadas. Com isso, conseguimos localizar o header HTTP do site, responsável pela comunicação com o servidor que envia o resultado solicitado ao browser. Nele, temos 2 cabeçalhos, juntamente com seus parâmetros:</p>
            <ul>
                <li><b>Request:</b> Para envio
                    <ul>
                        <li><b>Host:</b> Url ou ip</li>
                        <li><b>User-Agent:</b> Tipo de navegador e SO do pertencente</li>
                        <li><b>Referer:</b> Página anterior à qual você veio</li>
                        <li><b>Cookie:</b> Compactadores de informações de sessões, autenticação, cookies do firewall<small>(cf: Cloudflare)</small> salvos na máquina <small>(pode-se realizar Bypass com os cookies salvos já autenticados)</small></li>
                    </ul>
                </li>
                <li><b>Response:</b> De resposta
                    <ul>
                        <li><b>CF-RAY:</b> Parâmetros do firewall Cloudflare</li>
                        <li><b>Server:</b> Identificação do servidor <small>(Real ou Firewall)</small></li>
                        <li><b>X-Powered-By:</b> Mensagem do servidor identificando linguagem do site <small>(Nem sempre é 100% confirmado)</small></li>
                    </ul>
                </li>
            </ul>
            <img src="../anexos1/posta4/netheaders.png" class="img-fluid">
            <br><br>
            <p id="textoPost">Para maiores detalhes sobre, pode-se usar o <b>Netcat</b> com os comandos abaixo, que o servidor enviará um Response Header de funcionamento:</p>
<small><pre id="codigo"><code>
<b>nc www.bancocn.com 80</b>
GET / HTTP/1.0
Host: www.bancocn.com
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: pt-BR
Connection: keep-alive
Cookie: __cfduid=dd1f94e17e11b750771b23f1c4d46c96a1592855093; cf_clearance=9d635dc0e4582faca692baac2be1161c33e6e787-1592998676-0-f107732-150; cf_chl_1=3c8d95637607170
Upgrade-Insecure-Requests: 1
Cache-Control: max-age=0
</code></pre></small>
            <p id="textoPost">Os dados acima foram copiados do Network do Browser, do Request Header. O Firewall, não aceitará request via terminal, pois solicita validação via JavaScript, que está presente somente no navegador, sendo ausente no terminal, do qual está sendo enviada a requisição. Há softwares, desenvolvidos com Python, para burlar tal problema. A solução para tal problema é enviar o Request Header, gerado numa requisição via Browser, por inteiro (remover somente o 'Acept-Ecoding'), incluindo os cookies já validados pelo firewall, conforme no exemplo acima. É provável que o Response Header será de 200, ou seja, conexão bem sucedida.</p>
            <br>
            <h4>Brute Force de diretórios</h4>
            <p id="textoPost">Pode-se fazer manualmente, inserindo na url <small>(Ex: bancocn.com/admin, bancocn.com/medias, bancocn.com/webmail...)</small>, ou de forma automatizada com o <b>Dirb</b>.</p>
            <br>
            <h4>Dirb</h4>
<small><pre id="codigo"><code>
dirb url listaDiretorios.txt (a lista é opcional, pois há uma default caso ñ informada)
dirb http://bancocn.com -v (-v mostra procedimento)
</code></pre></small>
            <p id="textoPost">Nos casos com Firewall, é muito provável que o dirb não funcione, informando erro 503 ou afins. Dessa forma, terá de ser feito <b>Bypass</b>, utilizando os dados do Request header. O <b>-a</b> representa o User-agent, copiado do Request header validado pelo Cloudflare. O <b>-c</b> representão os cookies do Request header. O <b>-f</b> representa uma pesquisa refinada. Esse Bypass funcionará por tempo limitado, pois o firewall solicitará novos dados do Header, que deverá ser alterado no comando abaixo (-a e -c). Para uma pesquisa mais limpa, remova o <b>-v</b>, que o dirb mostrará apenas os resultados satisfatórios. Pode-se inclusive executar dirb dentro de pastas descobertas pelo próprio dirb.</p>
<small><pre id="codigo"><code>
dirb http://bancocn.com -v -a "Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0" -c "__cfduid=dd1f94e17e11b750771b23f1c4d46c96a1592855093; cf_clearance=9d635dc0e4582faca692baac2be1161c33e6e787-1592998676-0-f107732-150; cf_chl_1=3c8d95637607170" -f
</code></pre></small>
            <img src="../anexos1/posta4/dirb.png" class="img-fluid">
            <br><br>
            <h4>SQL Injection</h4>
            <p id="textoPost">Enviar dados diferenciais na url, a fim de obter informações sobre o banco de dados.</p>
<small><pre id="codigo"><code>
http://www.bancocn.com/cat.php?id=1
http://www.bancocn.com/cat.php?id=' (Troca-se o 1 por aspa simples)
</code></pre></small>
        </div>
    </div>


</div>
</body>
</html>